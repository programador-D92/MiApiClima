<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Jost:ital,wght@0,100..900;1,100..900&family=Lobster&family=Michroma&family=Pacifico&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<!-- Estilos de Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="estilos.css">
    <title>Document</title>
</head>
<body>

  <!-- CABECERA -->
  <header class="principal">
    <h1 class="titulo">WeatherNow</h1>
     
  <main class="buscarclima">
     <h5 class="consulta">Consulta el clima</h5>   
 
    <section class="busqueda">
      <input class="input" type="text" id="city-input" placeholder="Ej. Ciudad de M√©xico">
      <button onclick="buscarClima()" class="buscar">Buscar</button>
      <span class="material-symbols-outlined">search</span>
    </section>

    <!-- resultado de la busqueda -->
     <div class="resultado-clima">
       <div id="resultado" class="resultado">
       </div>
     </div>

      <ul class="navigation-list">  <!-- Contenedor Padre / se aplica el display: flex-->
        <li><a href="#sobre-mi">Sobre m√≠</a></li>   <!-- hijos de navigation-list-->
        <li><a href="#habilidades">Habilidades</a></li>
        <li><a href="#educacion">Educaci√≥n</a></li>
        <li><a href="#recomendaciones-utiles">Recomendaciones √∫tiles</a></li>
     </ul>
  </main>
   
</header>


  <!-- CONTENEDOR DEL MAPA -->
  <div id="map"></div>

    <section class="galery">
         <section class="sugerenci" id="recomendaciones-utiles">
            <h1 class="name-1">Recomendaciones √∫tiles</h1>
        </section>

        <article class="acordeon-item-uno">
                <div class="contenido-uno" onclick="toggleContenido(this)">
                 <h3 class="titulo-huracanes">Huracanes</h3>
                  <span class="arrow">‚ñ∂</span>
            </div>

            <div class="recomemdacion-item-uno">
              <ul>

                <li>Mantente informado con fuentes oficiales (Conagua, Protecci√≥n Civil).</li>
                <li>Cubre ventanas con madera o cinta adhesiva en forma de X.</li>
                <li>Almacena agua potable y alimentos no perecederos.</li>
                <li>Ten un botiqu√≠n de primeros auxilios y documentos importantes a la mano.</li>
                <li>Desconecta aparatos el√©ctricos.</li>
                <li>No salgas durante el paso del hurac√°n, incluso si parece haber calma.</li>
            </ul>
            </div>
         </article>


      
  <script>
  function toggleContenido(element) {
    const parent = element.parentElement;
    parent.classList.toggle('open');
  }
  </script>

  
<!-- Consumo API Clima -->
    <script>
  async function buscarClima() {
    const ciudad = document.getElementById('city-input').value;
    const apiKey = '66f01d21f7c8ae49ead47ae5964e61c4'; // Reemplaza con tu API key
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${ciudad}&appid=${apiKey}&units=metric&lang=es`;

    try {
      const respuesta = await fetch(url);
      if (!respuesta.ok) {
        throw new Error('Ciudad no encontrada');
      }

      const datos = await respuesta.json();

      const climaHTML = `
        <h3>Clima en ${datos.name}</h3>
        <p>Temperatura: ${datos.main.temp} ¬∞C</p>
        <p>Condici√≥n: ${datos.weather[0].description}</p>
        <p>Humedad: ${datos.main.humidity}%</p>
        <p>Viento: ${datos.wind.speed} m/s</p>
      `;

      document.getElementById('resultado').innerHTML = climaHTML;

    } catch (error) {
      document.getElementById('resultado').innerHTML = `<p>Error: ${error.message}</p>`;
    }
  }
</script>




<!-- Consumo API mapa -->
          <!-- PIE DE P√ÅGINA -->
  <footer>
    Datos del clima en tiempo real proporcionados por OpenWeatherMap.
  </footer>

  <!-- Scripts al final para evitar errores -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Crear el mapa centrado en M√©xico
    var map = L.map('map').setView([23.6345, -102.5528], 5);

    // Capa base de calles (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '¬© OpenStreetMap contributors'
    }).addTo(map);

    // Tu clave de OpenWeatherMap (reempl√°zala por la tuya si cambia)
    const apiKey = '66f01d21f7c8ae49ead47ae5964e61c4';

    // Capa de nubes en tiempo real (OpenWeatherMap)
    L.tileLayer(`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${apiKey}`, {
      attribution: '¬© OpenWeatherMap',
      opacity: 0.6
    }).addTo(map);

     // Capas clim√°ticas
  const clouds = L.tileLayer(`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.7});
  const temp = L.tileLayer(`https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.6});
  const precip = L.tileLayer(`https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});
  const pressure = L.tileLayer(`https://tile.openweathermap.org/map/pressure_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});
  const wind = L.tileLayer(`https://tile.openweathermap.org/map/wind_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});
  const snow = L.tileLayer(`https://tile.openweathermap.org/map/snow/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});

  // Agrupar en un objeto para el control de capas
  const overlays = {
    "‚òÅÔ∏è Nubes": clouds,
    "üå°Ô∏è Temperatura": temp,
    "üåßÔ∏è Precipitaci√≥n": precip,
    "üå¨Ô∏è Viento": wind,
    "‚ùÑÔ∏è Nieve": snow,
    "üîµ Presi√≥n": pressure
  };

  // Agregar control de capas
  L.control.layers(null, overlays).addTo(map);

  // Mostrar por defecto una capa (ej. nubes)
  clouds.addTo(map);

  </script>

    </section>

    
</body>
</html>