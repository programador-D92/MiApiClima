<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Jost:ital,wght@0,100..900;1,100..900&family=Lobster&family=Michroma&family=Pacifico&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Jost:ital,wght@0,100..900;1,100..900&family=Lobster&family=Michroma&family=Pacifico&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<!-- Estilos de Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="estilos.css">
    <title>Document</title>
</head>
<body>

  <!-- CABECERA -->
   <header class="cabecera">
        <h1 class="titulo">WeatherNow</h1>

    <ul class="navigation-list">  <!-- Contenedor Padre / se aplica el display: flex-->
        <li><a href="#inicio">Inicio</a></li>   <!-- hijos de navigation-list-->
        <li><a href="#fenomenos-meteorologicos">Fen√≥menos Meteorol√≥gicos</a></li>
        <li><a href="#fenomenos-geologicos">Fen√≥menos Geol√≥gicos</a></li>
        <li><a href="#Secci√≥n-general">Secci√≥n general</a></li>
    </ul>
   </header>


  <section class="principal" id="inicio">     
  <main class="buscarclima">
     <h5 class="consulta">Consulta el clima</h5>   
 
    <section class="busqueda">
      <input class="input" type="text" id="city-input" placeholder="Ej. Ciudad de M√©xico">
      <button onclick="buscarClima()" class="buscar">Buscar</button>
      <span class="material-symbols-outlined">search</span>
      <span title="Formato: Ciudad, Estado (ej. Zapopan, Jalisco o Nueva York, US)" class="mensaje-flotante">‚ÑπÔ∏è</span>
    </section>

    <!-- resultado de la busqueda -->
     <div class="resultado-clima">
       <div id="resultado" class="resultado">
       </div>
     </div>
  </main> 
</section>
 
<!-- Inicia evento de teclado Enter para ejecutar b√∫squeda  -->
<script>
  const input = document.getElementById("city-input");
  // escucha cuando se presiona una tecla
  input.addEventListener("keypress", function (event){
    if (event.key === "Enter"){ //verifica si es enter
      event.preventDefault();  // evita que se recargue la pagina
      buscarClima();
    }
  })

  function buscarClima(){
    const ciudad = input.value.trim();
    if (ciudad !== ""){
      console.log("Buscando clima de: ", ciudad);
       // Aqu√≠ llamas a tu funci√≥n que consulta la API de clima
    }
  }
</script>
<!-- Fin de evento de teclado Enter para ejecutar b√∫squeda  -->


  <!-- CONTENEDOR DEL MAPA -->
  <div id="map"></div>


  <!-- Primera etapa de recomendaciones -->
  <section class="suggestions-section-one" id="fenomenos-meteorologicos">
        <section class="name-suggestions-one">
          <h1 class="name-1">Recomendaciones √∫tiles</h1>
            <h2 class="name-2">Fen√≥menos meteorol√≥gicos</h2>
        </section>

    <!--Primera seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Recomendaciones en caso de hurac√°n</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Mantente informado con fuentes oficiales (Conagua, Protecci√≥n Civil).</li>
    <li>Cubre ventanas con madera o cinta adhesiva en forma de X.</li>
    <li>Almacena agua potable y alimentos no perecederos.</li>
    <li>Ten un botiqu√≠n de primeros auxilios y documentos importantes a la mano.</li>
    <li>Desconecta aparatos el√©ctricos.</li>
    <li>No salgas durante el paso del hurac√°n, incluso si parece haber calma.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de primera seccion de Recomendaciones -->

    <!--Segunda seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Inundaciones y lluvias intensas</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Mantente informado a trav√©s de medios oficiales como CONAGUA, Protecci√≥n Civil o estaciones locales..</li>
    <li>No intentes cruzar calles inundadas a pie o en veh√≠culo.</li>
    <li>Almacena agua potable y alimentos no perecederos.</li>
    <li>Revisa el estado de techos, bajadas de agua y coladeras en casa..</li>
    <li>No arrojes basura en la calle o drenaje; contribuye a evitar taponamientos.</li>
    <li>Al√©jate de r√≠os, arroyos o canales con aumento de nivel.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de segunda seccion de Recomendaciones -->

    <!--Tercera seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Ondas de calor y altas temperauras</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Mantente hidratado: bebe agua frecuentemente, aunque no tengas sed.</li>
    <li>Evita exponerte al sol entre las 11:00 a.m. y 4:00 p.m.</li>
    <li>Usa ropa ligera, de colores claros y con telas frescas (algod√≥n, lino).</li>
    <li>Aplica bloqueador solar (FPS 30 m√≠nimo) si necesitas salir.</li>
    <li>Permanece en lugares frescos, ventilados o con sombra.</li>
    <li>Nunca dejes a personas o mascotas dentro de un veh√≠culo cerrado.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de tercera seccion de Recomendaciones -->

    <!--Cuarta seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Frentes frios y heladas</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Viste con ropa abrigadora en capas: usa gorros, bufandas, guantes y calcetas gruesas.</li>
    <li>Si usas calentadores de gas o carb√≥n, aseg√∫rate de tener ventilaci√≥n adecuada para evitar intoxicaciones.</li>
    <li>Protege a ni√±os, adultos mayores y personas enfermas, ya que son m√°s vulnerables al fr√≠o.</li>
    <li>Bebe l√≠quidos calientes y consume alimentos ricos en calor√≠as y vitaminas.</li>
    <li>Cubre y protege tuber√≠as, plantas y animales del fr√≠o intenso.</li>
    <li>Sigue las recomendaciones de Protecci√≥n Civil y medios oficiales.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de cuarta seccion de Recomendaciones -->

    <!--Quinta seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Nevadas y tormentas invernales</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Permanece en casa y evita salir si no es estrictamente necesario.</li>
    <li>Viste en capas con ropa t√©rmica, impermeable, gorro, guantes, bufanda y calzado antideslizante.</li>
    <li>Mant√©n encendidos los sistemas de calefacci√≥n con ventilaci√≥n adecuada para evitar intoxicaciones.</li>
    <li>Si sales, evita caminar o conducir por zonas con hielo, nieve o visibilidad reducida.</li>
    <li>Almacena agua y alimentos por si quedas incomunicado durante la tormenta.</li>
    <li>Evita el uso de estufas o anafres en lugares sin ventilaci√≥n.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de quinta seccion de Recomendaciones -->

    <!--Sexta seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Sequias</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Usa la lavadora y el lavavajillas s√≥lo con cargas completas.</li>
    <li>Riega plantas o jardines por la noche o muy temprano para evitar evaporaci√≥n.</li>
    <li>Evita desperdiciar agua en actividades no esenciales (como llenar albercas o fuentes).</li>
    <li>Si vives en zona rural, almacena agua de lluvia cuando sea posible y segura.</li>
    <li>Usa cubetas en lugar de mangueras para lavar autos, banquetas o exteriores.</li>
    <li>Comparte y promueve el uso responsable del agua con tu familia y comunidad.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de sexta seccion de Recomendaciones -->

    <!--Septima seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Tornados</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>C√∫brete con un colch√≥n, cobijas o ropa pesada para protegerte de escombros.</li>
    <li>No busques refugio debajo de puentes o pasos elevados.</li>
    <li>No intentes huir en el auto si el tornado est√° cerca.</li>
    <li>Evita l√≠neas el√©ctricas ca√≠das y estructuras da√±adas.</li>
    <li>No enciendas cerillos o encendedores si hay olor a gas.</li>
    <li>Escucha instrucciones oficiales antes de salir del refugio.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de septima seccion de Recomendaciones -->
   
    <!--Octava seccion de Recomendaciones -->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Granizadas</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Permanece bajo techo mientras dure la granizada; evita salir a la calle.</li>
    <li>Si est√°s en la calle y no puedes resguardarte, protege tu cabeza con lo que tengas a la mano (mochila, bolsa, abrigo).</li>
    <li>Al√©jate de ventanas, tragaluces o estructuras de vidrio que puedan romperse.</li>
    <li>Desconecta aparatos electr√≥nicos si hay descargas el√©ctricas o posibilidad de corte de energ√≠a.</li>
    <li>Evita estar cerca de √°rboles o postes, ya que pueden caer por el peso del granizo.</li>
    <li>No busques refugio bajo estructuras fr√°giles como techos de l√°mina o carpas.</li>
  </ul>
</div>
    </section>
    <hr>
     <!--Fin de octava seccion de Recomendaciones -->
</section>
  


   <!-- Segunda etapa de recomendaciones -->

<section class="suggestions-section-two">
    <section class="name-suggestions-two" id="fenomenos-geologicos">
            <h2 class="name-3">Fen√≥menos geol√≥gicos</h2>
    </section>

    <!--Primera seccion de recomendaciones fenomenos geologicos-->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Sismos y terremotos</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Identifica zonas seguras dentro y fuera de tu casa, escuela o lugar de trabajo.</li>
    <li>Mant√©n la calma y evita correr o empujar.</li>
    <li>Al√©jate de ventanas, espejos y objetos que puedan caer.</li>
    <li>Si est√°s en la calle, al√©jate de postes, cables el√©ctricos y fachadas.</li>
    <li>Si manejas, det√©n el veh√≠culo en un lugar seguro y permanece dentro hasta que termine el movimiento.</li>
    <li>Participa en simulacros para practicar c√≥mo actuar.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de primera seccion de Recomendaciones -->

    <!--Segunda seccion de recomendaciones fenomenos geologicos-->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Erupciones volc√°nicas</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Sigue las indicaciones de las autoridades y evac√∫a si as√≠ lo ordenan.</li>
    <li>Usa mascarilla o un pa√±o h√∫medo para cubrir nariz y boca, evitando inhalar ceniza.</li>
    <li>Protege tus ojos con gafas cerradas y tu piel con ropa que cubra brazos y piernas.</li>
    <li>Permanece en interiores con puertas y ventanas cerradas.</li>
    <li>No conduzcas a menos que sea estrictamente necesario, la ceniza reduce la visibilidad y da√±a los motores.</li>
    <li>Protege dep√≥sitos de agua para evitar que se contaminen con ceniza.</li>
  </ul>
</div>
    </section>
    <hr>
</section>

    <!-- trecera seccion de recomendaciones fenomenos geologicos-->
 <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Tsunamis</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Inf√≥rmate si vives o trabajas en una zona de riesgo costero.</li>
    <li>Identifica rutas de evacuaci√≥n hacia zonas elevadas y seguras.</li>
    <li>Participa en simulacros y establece un plan familiar de emergencia.</li>
    <li>Mant√©n lista una mochila con agua, alimentos no perecederos, radio, linterna y botiqu√≠n.</li>
    <li>No te acerques a la playa a observar el fen√≥meno, es extremadamente peligroso.</li>
    <li>Brinda ayuda a heridos y personas vulnerables.</li>

    </li>
  </ul>
</div>
    </section>
    <hr>
</section>


<!-- Seccion general -->

<section class="suggestions-section-two">
    <section class="name-suggestions-two" id="Secci√≥n-general">
            <h2 class="name-3"> Secci√≥n general</h2>
    </section>

    <!--Primera seccion de recomendaciones fenomenos geologicos-->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">¬øC√≥mo preparar un kit de emergencia familiar?</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Linterna con pilas extra o recargable.</li>
    <li>Vendas, gasas est√©riles y cinta m√©dica.</li>
    <li>Analg√©sicos y medicamentos recetados.</li>
    <li>Lista de tel√©fonos de emergencia.</li>
    <li>Antis√©pticos y alcohol.</li>
    <li>Cobijas o mantas t√©rmicas.</li>
  </ul>
</div>
    </section>
    <hr>
    <!--Fin de primera seccion de Recomendaciones -->

    <!--Segunda seccion de recomendaciones fenomenos geologicos-->
    <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">¬øC√≥mo actuar si quedas incomunicado?</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Mant√©n la calma y eval√∫a tu entorno para identificar posibles peligros.</li>
    <li>Usa mensajes de texto en lugar de llamadas, ya que consumen menos red.</li>
    <li>Ten siempre contigo una tarjeta con contactos de emergencia.</li>
    <li>Acuerda con tu familia un punto de reuni√≥n seguro en caso de perder contacto.</li>
    <li>Informa a tus familiares o amigos tu ubicaci√≥n y estado de salud.</li>
    <li>Sigue las instrucciones de Protecci√≥n Civil o autoridades competentes.</li>
  </ul>
</div>
    </section>
    <hr>
</section>

    <!-- trecera seccion de recomendaciones fenomenos geologicos-->
 <section class="first-section">
  <div class="title-container">
    <h2 class="recomendacion-huracan">Recomendaciones para mascotas en emergencias</h2>
           <!-- Flecha -->
          <i class="arrow right toggleArrow"></i>
  </div>
    <!-- Contenido oculto -->
<div class="recomendacion-item-uno infoBox">
  <ul>
    <li>Transportadora o jaula segura.</li>
    <li>Nunca la dejes amarrada o encerrada sin supervisi√≥n.</li>
    <li>Evita exponerla a zonas peligrosas, escombros o agua contaminada.</li>
    <li>Incluye una foto reciente para ayudar en caso de extrav√≠o.</li>
    <li>Bolsas para desechos y art√≠culos de limpieza.</li>
    <li>Alimento y agua para al menos 3 d√≠as.</li>

    </li>
  </ul>
</div>
    </section>
    <hr>
</section>

  <!--script de seccion de Recomendaciones -->
<script>
  document.querySelectorAll(".toggleArrow").forEach((arrow, index) =>{
  const infoBox = document.querySelectorAll(".infoBox")[index];

  arrow.addEventListener("click", () => {
    arrow.classList.toggle("down");
    arrow.classList.toggle("right");
    infoBox.classList.toggle("show");
  });
  });
</script>
   <!--Fin de script de seccion de Recomendaciones -->


  
<!-- Consumo API Clima -->


<!-- Fin Consumo API Clima -->



  <script>

// Variable global para borrar marcador anterior si se hace otra b√∫squeda
let marcadorUbicacion;

async function buscarClima() {
  const ciudad = document.getElementById("city-input").value.trim();
  const resultado = document.getElementById("resultado");
  const apiKey = '66f01d21f7c8ae49ead47ae5964e61c4';

  if (!ciudad) return;

  resultado.innerHTML = `<p>üîé Buscando clima para "${ciudad}"... ‚è≥</p>`;

  try {
    let geoData = [];
    let queryMX = `${ciudad},MX`;

    // Buscar coordenadas
    let geoUrl = `https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(queryMX)}&limit=1&appid=${apiKey}`;
    let geoRes = await fetch(geoUrl);
    geoData = await geoRes.json();

    if (geoData.length === 0) {
      geoUrl = `https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(ciudad)}&limit=3&appid=${apiKey}`;
      geoRes = await fetch(geoUrl);
      geoData = await geoRes.json();
    }

    if (geoData.length === 0) {
      throw new Error("Localidad no encontrada");
    }

    const { lat, lon, name, state, country } = geoData[0];

    // Centrar el mapa
    map.setView([lat, lon], 7);

    // Borrar marcador anterior si existe
    if (marcadorUbicacion) {
      map.removeLayer(marcadorUbicacion);
    }

    // Obtener clima
    const climaUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=es`;
    const climaRes = await fetch(climaUrl);
    if (!climaRes.ok) throw new Error("No se pudo obtener el clima");
    const datos = await climaRes.json();

    resultado.innerHTML = `
      <h3>Clima cerca de ${name}${state ? ", " + state : ""}, ${country}</h3>
      <p>üå°Ô∏è Temperatura: ${datos.main.temp} ¬∞C</p>
      <p>üå•Ô∏è Condici√≥n: ${datos.weather[0].description}</p>
      <p>üíß Humedad: ${datos.main.humidity}%</p>
      <p>üí® Viento: ${datos.wind.speed} m/s</p>
    `;

    // Crear marcador con √≠cono del clima
    const iconClima = L.icon({
      iconUrl: `https://openweathermap.org/img/wn/${datos.weather[0].icon}@2x.png`,
      iconSize: [50, 50],
      iconAnchor: [25, 50]
    });

    marcadorUbicacion = L.marker([lat, lon], { icon: iconClima }).addTo(map)
      .bindPopup(`
        <b>${name}${state ? ", " + state : ""}</b><br>
        üå°Ô∏è ${datos.main.temp} ¬∞C<br>
        üå•Ô∏è ${datos.weather[0].description}<br>
        üíß ${datos.main.humidity}% humedad<br>
        üí® ${datos.wind.speed} m/s
      `)
      .openPopup();

    // Consultar alertas
    const alertUrl = `https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&appid=${apiKey}&lang=es`;
    const alertRes = await fetch(alertUrl);
    const alertData = await alertRes.json();

    if (alertData.alerts) {
      alertData.alerts.forEach(alert => {
        // Elegir icono seg√∫n tipo de alerta
        let iconUrl = "https://cdn-icons-png.flaticon.com/512/753/753318.png"; // default
        if (/tormenta/i.test(alert.event)) iconUrl = "https://cdn-icons-png.flaticon.com/512/1146/1146869.png";
        else if (/calor|ola de calor/i.test(alert.event)) iconUrl = "https://cdn-icons-png.flaticon.com/512/869/869869.png";
        else if (/nieve/i.test(alert.event)) iconUrl = "https://cdn-icons-png.flaticon.com/512/642/642102.png";

        const iconoAlerta = L.icon({
          iconUrl,
          iconSize: [32, 32],
          iconAnchor: [16, 32],
          popupAnchor: [0, -32]
        });

        L.marker([lat, lon], { icon: iconoAlerta }).addTo(map)
          .bindPopup(`
            <b>‚ö† ${alert.event}</b><br>
            <small><b>Inicio:</b> ${new Date(alert.start * 1000).toLocaleString()}</small><br>
            <small><b>Fin:</b> ${new Date(alert.end * 1000).toLocaleString()}</small><br>
            <p>${alert.description}</p>
            <small><i>Fuente: ${alert.sender_name}</i></small>
          `);
      });
    }

  } catch (error) {
    resultado.innerHTML = `<p style="color:red;">‚ö†Ô∏è Error: ${error.message}</p>`;
  }
}


</script>


<!-- Inicio de footer -->
          <!-- PIE DE P√ÅGINA -->
  <footer>
    <div class="footer">
      <div class="seccion footer-uno">
        <p class="derechos">¬© 2025 DiazSoft. Todos los derechos reservados.</p>
        <p class="autor">WeatherNow‚Ñ¢ es un producto de DiazSoft.</p>
      </div>

      <div class="seccion footer-dos">
        <p class="derechos">Pol√≠tica de privacidad</p>
        <p class="autor">T√©rminos y condiciones</p>
        <p class="contacto">Contacto</p>
      </div>

      <div class="seccion footer-tres">
        <p class="derechos">¬© 2025 DiazSoft. Todos los derechos reservados.</p>
        <p class="autor">WeatherNow‚Ñ¢ es un producto de DiazSoft.</p>
      </div>
    </div>

      <p class="enlace-clima">Datos del clima en tiempo real proporcionados por OpenWeatherMap.</p>

    <div class="icons">
        <a href="https://github.com/programador-D92" target="_blank">
          <img src="assets/icons/github-white.svg" alt="GitHub" class="GitHub-icon">
          <span class="name-GitHub">GitHub</span>
        </a>

        <a href="https://www.linkedin.com/in/jose-d%C3%ADaz-silvas-938728360/" target="_blank">
          <img src="assets/icons/linkedin-white.svg" alt="Linkedin" class="linkedin-icon">
          <span class="name-linkedin">Linkedin</span>
        </a>

        <a href="#" target="_blank">
          <img src="assets/icons/youtube-white.svg" alt="youtube" class="youtube-icon">
          <span class="name-youtube">YouTube</span>
        </a>

        <a href="#" target="_blank">
          <img src="assets/icons/facebook-white.svg" alt="facebook" class="facebook-icon">
          <sapan class="name-facebook">Facebook</sapan>
        </a>
    </div>
 
  </footer>

  
<!-- Consumo API mapa -->
<!-- Scripts al final para evitar errores -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Crear el mapa centrado en M√©xico
  var map = L.map('map').setView([23.6345, -102.5528], 5);

  // Capa base de calles (OpenStreetMap)
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);

  // Tu clave de OpenWeatherMap
  const apiKey = '66f01d21f7c8ae49ead47ae5964e61c4';

  // Capas clim√°ticas
  const clouds = L.tileLayer(`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.7});
  const temp = L.tileLayer(`https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.6});
  const precip = L.tileLayer(`https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});
  const pressure = L.tileLayer(`https://tile.openweathermap.org/map/pressure_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});
  const wind = L.tileLayer(`https://tile.openweathermap.org/map/wind_new/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});
  const snow = L.tileLayer(`https://tile.openweathermap.org/map/snow/{z}/{x}/{y}.png?appid=${apiKey}`, {opacity: 0.5});

  const overlays = {
    "‚òÅÔ∏è Nubes": clouds,
    "üå°Ô∏è Temperatura": temp,
    "üåßÔ∏è Precipitaci√≥n": precip,
    "üå¨Ô∏è Viento": wind,
    "‚ùÑÔ∏è Nieve": snow,
    "üîµ Presi√≥n": pressure
  };

  L.control.layers(null, overlays).addTo(map);
  clouds.addTo(map); // Capa por defecto

  // === NUEVO: Obtener alertas ===
  async function getWeatherAlerts(lat, lon) {
    const url = `https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&appid=${apiKey}&lang=es`;
    try {
      const res = await fetch(url);
      const data = await res.json();

      if (data.alerts) {
        data.alerts.forEach(alert => {
          // Crear marcador en la posici√≥n central (puedes ajustarlo a la zona real)
          const marker = L.marker([lat, lon]).addTo(map);
          marker.bindPopup(`
            <b>‚ö† ${alert.event}</b><br>
            <small><b>Inicio:</b> ${new Date(alert.start * 1000).toLocaleString()}</small><br>
            <small><b>Fin:</b> ${new Date(alert.end * 1000).toLocaleString()}</small><br>
            <p>${alert.description}</p>
            <small><i>Fuente: ${alert.sender_name}</i></small>
          `);
        });
      } else {
        console.log("No hay alertas activas en esta ubicaci√≥n");
      }
    } catch (err) {
      console.error("Error al obtener alertas:", err);
    }
  }

  // Llamada inicial (M√©xico)
  getWeatherAlerts(23.6345, -102.5528);
</script>


<!-- Fin consumo API mapa -->

    </section>

    
</body>
</html>